{
  "version": "2.0.0",
  "tasks": [
    // CLEAN TASKS
    {
      "label": "Clean (Pico)",
      "type": "shell",
      "command": "platformio",
      "args": ["run", "-e", "pico", "--target", "clean"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Clean (ESP32)",
      "type": "shell",
      "command": "platformio",
      "args": ["run", "-e", "esp32", "--target", "clean"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },

    // BUILD TASKS
    {
      "label": "Build (Pico)",
      "type": "shell",
      "command": "platformio",
      "args": ["run", "-e", "pico"],
      "group": "build",
      "dependsOn": ["Clean (Pico)"],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": ["$platformio"]
    },
    {
      "label": "Build (ESP32)",
      "type": "shell",
      "command": "platformio",
      "args": ["run", "-e", "esp32"],
      "group": "build",
      "dependsOn": ["Clean (ESP32)"],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": ["$platformio"]
    },

    // UPLOAD TASKS
    {
      "label": "Upload (Pico)",
      "type": "shell",
      "command": "platformio",
      "args": ["run", "-e", "pico", "--target", "upload"],
      "group": "build",
      "dependsOn": ["Build (Pico)"],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Upload (ESP32)",
      "type": "shell",
      "command": "platformio",
      "args": ["run", "-e", "esp32", "--target", "upload"],
      "group": "build",
      "dependsOn": ["Build (ESP32)"],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },

    // MONITOR TASKS
    {
      "label": "Monitor (Pico)",
      "type": "shell",
      "command": "platformio",
      "args": ["device", "monitor", "-e", "pico"],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated"
      },
      "problemMatcher": []
    },
    {
      "label": "Monitor (ESP32)",
      "type": "shell",
      "command": "platformio",
      "args": ["device", "monitor", "-e", "esp32"],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated"
      },
      "problemMatcher": []
    },

    // COMPOSITE TASKS (build+upload in sequence)
    {
      "label": "Build & Upload (Pico)",
      "dependsOrder": "sequence",
      "dependsOn": ["Clean (Pico)", "Build (Pico)", "Upload (Pico)"],
      "runOptions": {
        "runOn": "default"
      }
    },
    {
      "label": "Build & Upload (ESP32)",
      "dependsOrder": "sequence",
      "dependsOn": ["Clean (ESP32)", "Build (ESP32)", "Upload (ESP32)"],
      "runOptions": {
        "runOn": "default"
      }
    },

    // FULL BUILD & UPLOAD BOTH
    {
      "label": "Build & Upload All",
      "dependsOrder": "sequence",
      "dependsOn": ["Build & Upload (Pico)", "Build & Upload (ESP32)"]
    }
  ]
}
