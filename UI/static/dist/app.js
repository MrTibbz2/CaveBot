var X,d,ve,z,me,Se,Oe,Le,ae,ee,ie,$={},Ne=[],Ae=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,G=Array.isArray;function N(e,i){for(var t in i)e[t]=i[t];return e}function oe(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ue(e,i,t){var n,a,o,c={};for(o in i)o=="key"?n=i[o]:o=="ref"?a=i[o]:c[o]=i[o];if(arguments.length>2&&(c.children=arguments.length>3?X.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)c[o]===void 0&&(c[o]=e.defaultProps[o]);return C(e,c,n,a,null)}function C(e,i,t,n,a){var o={type:e,props:i,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++ve,__i:-1,__u:0};return a==null&&d.vnode!=null&&d.vnode(o),o}function Y(e){return e.children}function H(e,i){this.props=e,this.context=i}function W(e,i){if(i==null)return e.__?W(e.__,e.__i+1):null;for(var t;i<e.__k.length;i++)if((t=e.__k[i])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?W(e):null}function we(e){var i,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,i=0;i<e.__k.length;i++)if((t=e.__k[i])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return we(e)}}function _e(e){(!e.__d&&(e.__d=!0)&&z.push(e)&&!F.__r++||me!=d.debounceRendering)&&((me=d.debounceRendering)||Se)(F)}function F(){for(var e,i,t,n,a,o,c,s=1;z.length;)z.length>s&&z.sort(Oe),e=z.shift(),s=z.length,e.__d&&(t=void 0,a=(n=(i=e).__v).__e,o=[],c=[],i.__P&&((t=N({},n)).__v=n.__v+1,d.vnode&&d.vnode(t),le(i.__P,t,n,i.__n,i.__P.namespaceURI,32&n.__u?[a]:null,o,a??W(n),!!(32&n.__u),c),t.__v=n.__v,t.__.__k[t.__i]=t,ke(o,t,c),t.__e!=a&&we(t)));F.__r=0}function ze(e,i,t,n,a,o,c,s,m,r,p){var l,f,_,D,v,b,u=n&&n.__k||Ne,y=i.length;for(m=Ce(t,i,u,m,y),l=0;l<y;l++)(_=t.__k[l])!=null&&(f=_.__i==-1?$:u[_.__i]||$,_.__i=l,b=le(e,_,f,a,o,c,s,m,r,p),D=_.__e,_.ref&&f.ref!=_.ref&&(f.ref&&re(f.ref,null,_),p.push(_.ref,_.__c||D,_)),v==null&&D!=null&&(v=D),4&_.__u||f.__k===_.__k?m=We(_,m,e):typeof _.type=="function"&&b!==void 0?m=b:D&&(m=D.nextSibling),_.__u&=-7);return t.__e=v,m}function Ce(e,i,t,n,a){var o,c,s,m,r,p=t.length,l=p,f=0;for(e.__k=new Array(a),o=0;o<a;o++)(c=i[o])!=null&&typeof c!="boolean"&&typeof c!="function"?(m=o+f,(c=e.__k[o]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?C(null,c,null,null,null):G(c)?C(Y,{children:c},null,null,null):c.constructor==null&&c.__b>0?C(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,s=null,(r=c.__i=He(c,t,m,l))!=-1&&(l--,(s=t[r])&&(s.__u|=2)),s==null||s.__v==null?(r==-1&&(a>p?f--:a<p&&f++),typeof c.type!="function"&&(c.__u|=4)):r!=m&&(r==m-1?f--:r==m+1?f++:(r>m?f--:f++,c.__u|=4))):e.__k[o]=null;if(l)for(o=0;o<p;o++)(s=t[o])!=null&&!(2&s.__u)&&(s.__e==n&&(n=W(s)),Me(s,s));return n}function We(e,i,t){var n,a;if(typeof e.type=="function"){for(n=e.__k,a=0;n&&a<n.length;a++)n[a]&&(n[a].__=e,i=We(n[a],i,t));return i}e.__e!=i&&(i&&e.type&&!t.contains(i)&&(i=W(e)),t.insertBefore(e.__e,i||null),i=e.__e);do i=i&&i.nextSibling;while(i!=null&&i.nodeType==8);return i}function He(e,i,t,n){var a,o,c=e.key,s=e.type,m=i[t];if(m===null&&e.key==null||m&&c==m.key&&s==m.type&&!(2&m.__u))return t;if(n>(m!=null&&!(2&m.__u)?1:0))for(a=t-1,o=t+1;a>=0||o<i.length;){if(a>=0){if((m=i[a])&&!(2&m.__u)&&c==m.key&&s==m.type)return a;a--}if(o<i.length){if((m=i[o])&&!(2&m.__u)&&c==m.key&&s==m.type)return o;o++}}return-1}function pe(e,i,t){i[0]=="-"?e.setProperty(i,t??""):e[i]=t==null?"":typeof t!="number"||Ae.test(i)?t:t+"px"}function U(e,i,t,n,a){var o,c;e:if(i=="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(i in n)t&&i in t||pe(e.style,i,"");if(t)for(i in t)n&&t[i]==n[i]||pe(e.style,i,t[i])}else if(i[0]=="o"&&i[1]=="n")o=i!=(i=i.replace(Le,"$1")),c=i.toLowerCase(),i=c in e||i=="onFocusOut"||i=="onFocusIn"?c.slice(2):i.slice(2),e.l||(e.l={}),e.l[i+o]=t,t?n?t.u=n.u:(t.u=ae,e.addEventListener(i,o?ie:ee,o)):e.removeEventListener(i,o?ie:ee,o);else{if(a=="http://www.w3.org/2000/svg")i=i.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(i!="width"&&i!="height"&&i!="href"&&i!="list"&&i!="form"&&i!="tabIndex"&&i!="download"&&i!="rowSpan"&&i!="colSpan"&&i!="role"&&i!="popover"&&i in e)try{e[i]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&i[4]!="-"?e.removeAttribute(i):e.setAttribute(i,i=="popover"&&t==1?"":t))}}function fe(e){return function(i){if(this.l){var t=this.l[i.type+e];if(i.t==null)i.t=ae++;else if(i.t<t.u)return;return t(d.event?d.event(i):i)}}}function le(e,i,t,n,a,o,c,s,m,r){var p,l,f,_,D,v,b,u,y,k,w,T,P,ce,A,M,J,O=i.type;if(i.constructor!=null)return null;128&t.__u&&(m=!!(32&t.__u),o=[s=i.__e=t.__e]),(p=d.__b)&&p(i);e:if(typeof O=="function")try{if(u=i.props,y="prototype"in O&&O.prototype.render,k=(p=O.contextType)&&n[p.__c],w=p?k?k.props.value:p.__:n,t.__c?b=(l=i.__c=t.__c).__=l.__E:(y?i.__c=l=new O(u,w):(i.__c=l=new H(u,w),l.constructor=O,l.render=Fe),k&&k.sub(l),l.props=u,l.state||(l.state={}),l.context=w,l.__n=n,f=l.__d=!0,l.__h=[],l._sb=[]),y&&l.__s==null&&(l.__s=l.state),y&&O.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=N({},l.__s)),N(l.__s,O.getDerivedStateFromProps(u,l.__s))),_=l.props,D=l.state,l.__v=i,f)y&&O.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),y&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(y&&O.getDerivedStateFromProps==null&&u!==_&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(u,w),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(u,l.__s,w)===!1||i.__v==t.__v){for(i.__v!=t.__v&&(l.props=u,l.state=l.__s,l.__d=!1),i.__e=t.__e,i.__k=t.__k,i.__k.some(function(I){I&&(I.__=i)}),T=0;T<l._sb.length;T++)l.__h.push(l._sb[T]);l._sb=[],l.__h.length&&c.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(u,l.__s,w),y&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(_,D,v)})}if(l.context=w,l.props=u,l.__P=e,l.__e=!1,P=d.__r,ce=0,y){for(l.state=l.__s,l.__d=!1,P&&P(i),p=l.render(l.props,l.state,l.context),A=0;A<l._sb.length;A++)l.__h.push(l._sb[A]);l._sb=[]}else do l.__d=!1,P&&P(i),p=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++ce<25);l.state=l.__s,l.getChildContext!=null&&(n=N(N({},n),l.getChildContext())),y&&!f&&l.getSnapshotBeforeUpdate!=null&&(v=l.getSnapshotBeforeUpdate(_,D)),M=p,p!=null&&p.type===Y&&p.key==null&&(M=Pe(p.props.children)),s=ze(e,G(M)?M:[M],i,t,n,a,o,c,s,m,r),l.base=i.__e,i.__u&=-161,l.__h.length&&c.push(l),b&&(l.__E=l.__=null)}catch(I){if(i.__v=null,m||o!=null)if(I.then){for(i.__u|=m?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,i.__e=s}else for(J=o.length;J--;)oe(o[J]);else i.__e=t.__e,i.__k=t.__k;d.__e(I,i,t)}else o==null&&i.__v==t.__v?(i.__k=t.__k,i.__e=t.__e):s=i.__e=Re(t.__e,i,t,n,a,o,c,m,r);return(p=d.diffed)&&p(i),128&i.__u?void 0:s}function ke(e,i,t){for(var n=0;n<t.length;n++)re(t[n],t[++n],t[++n]);d.__c&&d.__c(i,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(o){o.call(a)})}catch(o){d.__e(o,a.__v)}})}function Pe(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:G(e)?e.map(Pe):N({},e)}function Re(e,i,t,n,a,o,c,s,m){var r,p,l,f,_,D,v,b=t.props,u=i.props,y=i.type;if(y=="svg"?a="http://www.w3.org/2000/svg":y=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),o!=null){for(r=0;r<o.length;r++)if((_=o[r])&&"setAttribute"in _==!!y&&(y?_.localName==y:_.nodeType==3)){e=_,o[r]=null;break}}if(e==null){if(y==null)return document.createTextNode(u);e=document.createElementNS(a,y,u.is&&u),s&&(d.__m&&d.__m(i,o),s=!1),o=null}if(y==null)b===u||s&&e.data==u||(e.data=u);else{if(o=o&&X.call(e.childNodes),b=t.props||$,!s&&o!=null)for(b={},r=0;r<e.attributes.length;r++)b[(_=e.attributes[r]).name]=_.value;for(r in b)if(_=b[r],r!="children"){if(r=="dangerouslySetInnerHTML")l=_;else if(!(r in u)){if(r=="value"&&"defaultValue"in u||r=="checked"&&"defaultChecked"in u)continue;U(e,r,null,_,a)}}for(r in u)_=u[r],r=="children"?f=_:r=="dangerouslySetInnerHTML"?p=_:r=="value"?D=_:r=="checked"?v=_:s&&typeof _!="function"||b[r]===_||U(e,r,_,b[r],a);if(p)s||l&&(p.__html==l.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),i.__k=[];else if(l&&(e.innerHTML=""),ze(i.type=="template"?e.content:e,G(f)?f:[f],i,t,n,y=="foreignObject"?"http://www.w3.org/1999/xhtml":a,o,c,o?o[0]:t.__k&&W(t,0),s,m),o!=null)for(r=o.length;r--;)oe(o[r]);s||(r="value",y=="progress"&&D==null?e.removeAttribute("value"):D!=null&&(D!==e[r]||y=="progress"&&!D||y=="option"&&D!=b[r])&&U(e,r,D,b[r],a),r="checked",v!=null&&v!=e[r]&&U(e,r,v,b[r],a))}return e}function re(e,i,t){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&i==null||(e.__u=e(i))}else e.current=i}catch(a){d.__e(a,t)}}function Me(e,i,t){var n,a;if(d.unmount&&d.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||re(n,null,i)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){d.__e(o,i)}n.base=n.__P=null}if(n=e.__k)for(a=0;a<n.length;a++)n[a]&&Me(n[a],i,t||typeof e.type!="function");t||oe(e.__e),e.__c=e.__=e.__e=void 0}function Fe(e,i,t){return this.constructor(e,t)}function Be(e,i,t){var n,a,o,c;i==document&&(i=document.documentElement),d.__&&d.__(e,i),a=(n=!1)?null:i.__k,o=[],c=[],le(i,e=i.__k=Ue(Y,null,[e]),a||$,$,i.namespaceURI,a?null:i.firstChild?X.call(i.childNodes):null,o,a?a.__e:i.firstChild,n,c),ke(o,e,c)}X=Ne.slice,d={__e:function(e,i,t,n){for(var a,o,c;i=i.__;)if((a=i.__c)&&!a.__)try{if((o=a.constructor)&&o.getDerivedStateFromError!=null&&(a.setState(o.getDerivedStateFromError(e)),c=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,n||{}),c=a.__d),c)return a.__E=a}catch(s){e=s}throw e}},ve=0,H.prototype.setState=function(e,i){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=N({},this.state),typeof e=="function"&&(e=e(N({},t),this.props)),e&&N(t,e),e!=null&&this.__v&&(i&&this._sb.push(i),_e(this))},H.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),_e(this))},H.prototype.render=Y,z=[],Se=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Oe=function(e,i){return e.__v.__b-i.__v.__b},F.__r=0,Le=/(PointerCapture)$|Capture$/i,ae=0,ee=fe(!1),ie=fe(!0);var je=0;function h(e,i,t,n,a,o){i||(i={});var c,s,m=i;if("ref"in m)for(s in m={},i)s=="ref"?c=i[s]:m[s]=i[s];var r={type:e,props:m,key:t,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--je,__i:-1,__u:0,__source:a,__self:o};if(typeof e=="function"&&(c=e.defaultProps))for(s in c)m[s]===void 0&&(m[s]=c[s]);return d.vnode&&d.vnode(r),r}var E,g,K,de,B=0,Ie=[],x=d,ue=x.__b,ye=x.__r,he=x.diffed,ge=x.__c,xe=x.unmount,De=x.__;function se(e,i){x.__h&&x.__h(g,e,B||i),B=0;var t=g.__H||(g.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({}),t.__[e]}function te(e){return B=1,Ve(Ee,e)}function Ve(e,i,t){var n=se(E++,2);if(n.t=e,!n.__c&&(n.__=[Ee(void 0,i),function(s){var m=n.__N?n.__N[0]:n.__[0],r=n.t(m,s);m!==r&&(n.__N=[r,n.__[1]],n.__c.setState({}))}],n.__c=g,!g.__f)){var a=function(s,m,r){if(!n.__c.__H)return!0;var p=n.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!o||o.call(this,s,m,r);var l=n.__c.props!==s;return p.forEach(function(f){if(f.__N){var _=f.__[0];f.__=f.__N,f.__N=void 0,_!==f.__[0]&&(l=!0)}}),o&&o.call(this,s,m,r)||l};g.__f=!0;var o=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(s,m,r){if(this.__e){var p=o;o=void 0,a(s,m,r),o=p}c&&c.call(this,s,m,r)},g.shouldComponentUpdate=a}return n.__N||n.__}function j(e,i){var t=se(E++,3);!x.__s&&$e(t.__H,i)&&(t.__=e,t.u=i,g.__H.__h.push(t))}function V(e){return B=5,qe(function(){return{current:e}},[])}function qe(e,i){var t=se(E++,7);return $e(t.__H,i)&&(t.__=e(),t.__H=i,t.__h=e),t.__}function Xe(){for(var e;e=Ie.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(R),e.__H.__h.forEach(ne),e.__H.__h=[]}catch(i){e.__H.__h=[],x.__e(i,e.__v)}}x.__b=function(e){g=null,ue&&ue(e)},x.__=function(e,i){e&&i.__k&&i.__k.__m&&(e.__m=i.__k.__m),De&&De(e,i)},x.__r=function(e){ye&&ye(e),E=0;var i=(g=e.__c).__H;i&&(K===g?(i.__h=[],g.__h=[],i.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(i.__h.forEach(R),i.__h.forEach(ne),i.__h=[],E=0)),K=g},x.diffed=function(e){he&&he(e);var i=e.__c;i&&i.__H&&(i.__H.__h.length&&(Ie.push(i)!==1&&de===x.requestAnimationFrame||((de=x.requestAnimationFrame)||Ge)(Xe)),i.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),K=g=null},x.__c=function(e,i){i.some(function(t){try{t.__h.forEach(R),t.__h=t.__h.filter(function(n){return!n.__||ne(n)})}catch(n){i.some(function(a){a.__h&&(a.__h=[])}),i=[],x.__e(n,t.__v)}}),ge&&ge(e,i)},x.unmount=function(e){xe&&xe(e);var i,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{R(n)}catch(a){i=a}}),t.__H=void 0,i&&x.__e(i,t.__v))};var be=typeof requestAnimationFrame=="function";function Ge(e){var i,t=function(){clearTimeout(n),be&&cancelAnimationFrame(i),setTimeout(e)},n=setTimeout(t,35);be&&(i=requestAnimationFrame(t))}function R(e){var i=g,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),g=i}function ne(e){var i=g;e.__c=e.__(),g=i}function $e(e,i){return!e||e.length!==i.length||i.some(function(t,n){return t!==e[n]})}function Ee(e,i){return typeof i=="function"?i(e):i}function Ye(){return h("nav",{className:"bg-gray-800 p-4",children:h("div",{className:"container mx-auto flex justify-between items-center",children:h("a",{href:"#",className:"text-white text-lg font-semibold",children:"CaveBot UI"})})})}function Je({logs:e}){const[i,t]=te(288),[n,a]=te(!1),o=V();j(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[e]);const c=r=>{a(!0),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},s=r=>{if(!n)return;const p=Math.max(192,Math.min(r.clientX,512));t(p)},m=()=>{a(!1),document.body.style.cursor="",document.body.style.userSelect=""};return j(()=>{if(n)return document.addEventListener("mousemove",s),document.addEventListener("mouseup",m),()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",m)}},[n]),h("div",{className:"relative flex-shrink-0",style:{width:`${i}px`},children:[h("aside",{className:"h-full bg-gray-800 p-6 shadow-lg space-y-6 flex flex-col justify-stretch w-full",children:[h("section",{className:"bg-gray-900 p-4 rounded-lg shadow-sm mb-4 flex-1 flex flex-col",children:[h("h2",{className:"text-lg font-semibold text-gray-100 mb-3",children:"Logs"}),h("div",{ref:o,className:"text-sm text-gray-300 max-h-48 overflow-y-auto border border-gray-700 p-2 rounded bg-gray-800",children:e.map((r,p)=>h("div",{className:"log-entry",children:[r.timestamp," - type: ",r.subtype,", message: ",r.payload.message]},p))})]}),h("section",{className:"bg-gray-900 p-4 rounded-lg shadow-sm flex-none",children:[h("h2",{className:"text-lg font-semibold text-gray-100 mb-3",children:"Commands"}),h("div",{className:"flex flex-col space-y-3",children:[h("button",{className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md",children:"Start Bot"}),h("button",{className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md",children:"Stop Bot"})]})]})]}),h("div",{className:"absolute top-0 right-0 h-full w-2 cursor-col-resize bg-gray-700 opacity-50 hover:opacity-80 z-10",onMouseDown:c})]})}const Q=[{id:"25",type:"expression",latex:"t=(\\pi/180)*-R",color:"#388c46",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"27",type:"expression",latex:"W=10",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"26",type:"expression",latex:"L=10",color:"#6042a6",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"Angle",type:"expression",latex:"R=0",color:"#2d70b3",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},sliderBounds:{min:"0",max:"360",step:"15"},playing:!1},{id:"X_Position",type:"expression",latex:"N=-0",color:"#6042a6",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"Y_Position",type:"expression",latex:"M=0",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"9",type:"expression",latex:"A=(N+(-W)*\\cos(t)-(-L)*\\sin(t),M+(-W)*\\sin(t)+(-L)*\\cos(t))",color:"#388c46",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"10",type:"expression",latex:"B=(N+W*\\cos(t)-(-L)*\\sin(t),M+W*\\sin(t)+(-L)*\\cos(t))",color:"#6042a6",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"11",type:"expression",latex:"C=(N+W*\\cos(t)-L*\\sin(t),M+W*\\sin(t)+L*\\cos(t))",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"12",type:"expression",latex:"D=(N+(-W)*\\cos(t)-L*\\sin(t),M+(-W)*\\sin(t)+L*\\cos(t))",color:"#c74440",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"botShape",type:"expression",latex:"\\operatorname{polygon}(A,B,C,D)",color:"#2d70b3",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"0.75",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"19",type:"expression",latex:"E=(N+0*\\cos(t)-(1.25*L)*\\sin(t),M+0*\\sin(t)+(1.25*L)*\\cos(t))",color:"#2d70b3",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"20",type:"expression",latex:"F=(N+(-0.25*W)*\\cos(t)-L*\\sin(t),M+(-0.25*W)*\\sin(t)+L*\\cos(t))",color:"#388c46",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"21",type:"expression",latex:"G=(N+0.25*W*\\cos(t)-L*\\sin(t),M+0.25*W*\\sin(t)+L*\\cos(t))",color:"#6042a6",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"23",type:"expression",latex:"\\operatorname{polygon}\\left(E,F,G\\right)",color:"#c74440",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"0.75",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"91",type:"expression",latex:"s_{1}=\\left(N+W*-0.5*\\cos(t)-L*1*\\sin(t),\\ M+W*-0.5*\\sin(t)+L*1*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"93",type:"expression",latex:"s_{2}=\\left(N+W*+0.5*\\cos(t)-L*1*\\sin(t),\\ M+W*+0.5*\\sin(t)+L*1*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"94",type:"expression",latex:"s_{3}\\ =\\left(N+W*-0.5*\\cos(t)-L*-1*\\sin(t),\\ M+W*-0.5*\\sin(t)+L*-1*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"95",type:"expression",latex:"s_{4}=\\left(N+W*+0.5*\\cos(t)-L*-1*\\sin(t),\\ M+W*+0.5*\\sin(t)+L*-1*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"96",type:"expression",latex:"s_{5}=\\left(N+W*-1*\\cos(t)-L*-0.5*\\sin(t),\\ M+W*-1*\\sin(t)+L*-0.5*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"97",type:"expression",latex:"s_{6}=\\left(N+W*-1*\\cos(t)-L*+0.5*\\sin(t),\\ M+W*-1*\\sin(t)+L*+0.5*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"98",type:"expression",latex:"s_{7}=\\left(N+W*+1*\\cos(t)-L*+0.5*\\sin(t),\\ M+W*+1*\\sin(t)+L*+0.5*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"99",type:"expression",latex:"s_{8}=\\left(N+W*+1*\\cos(t)-L*-0.5*\\sin(t),\\ M+W*+1*\\sin(t)+L*-0.5*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1}];function Ke(e){console.log("Initializing Desmos calculator");const i=window.Desmos.GraphingCalculator(e,{keypad:!1,expressions:!1,settingsMenu:!1});return console.log("Adding expressions to calculator:",Q.length),Q.forEach((t,n)=>{console.log(`Adding expression ${n+1}/${Q.length}: ${t.id}`),i.setExpression(t)}),console.log("Desmos calculator initialized"),i}function Z(e,i){const t=e.getExpressions(),n=t.find(a=>a.id===i);return console.log(`Looking for expression '${i}':`,n?"FOUND":"NOT FOUND"),n||console.log("Available expressions:",t.map(a=>a.id)),n}function Te(e,i={}){const t=V(),{onMessage:n,onOpen:a,onClose:o}=i;return j(()=>{console.log(`Attempting WebSocket connection to: ${e}`);const s=new WebSocket(e);return t.current=s,s.onopen=()=>{console.log(`✅ WebSocket connected successfully: ${e}`),a==null||a()},s.onmessage=m=>{console.log("Raw WebSocket message received:",m.data);try{const r=m.data.replace(/:Infinity/g,":null");console.log("Processed WebSocket data:",r);const p=JSON.parse(r);console.log("Parsed WebSocket data:",p),n==null||n(p)}catch(r){console.error("❌ WebSocket message parse error:",r),console.error("Raw data that failed:",m.data)}},s.onerror=m=>{console.error("❌ WebSocket error:",m)},s.onclose=m=>{console.log(`❌ WebSocket closed: ${e}`,m.code,m.reason),o==null||o()},()=>{console.log(`Closing WebSocket connection: ${e}`),s.close()}},[e]),{sendMessage:s=>{var m,r;console.log("Attempting to send WebSocket message:",s),((m=t.current)==null?void 0:m.readyState)===WebSocket.OPEN?(console.log("✅ Sending WebSocket message"),t.current.send(JSON.stringify(s))):console.error("❌ WebSocket not ready for sending. State:",(r=t.current)==null?void 0:r.readyState)}}}let S=null;const L={pos:{x:0,y:0},angle:0,sensors:{leftfront:{x:5,y:15,angle:90},leftback:{x:-5,y:15,angle:90},rightfront:{x:5,y:-15,angle:270},rightback:{x:-5,y:-15,angle:270},frontleft:{x:15,y:5,angle:0},frontright:{x:15,y:-5,angle:0},backleft:{x:-15,y:5,angle:180},backright:{x:-15,y:-5,angle:180}},setCalculator(e){console.log("Setting calculator instance:",e?"SUCCESS":"NULL"),S=e,e&&console.log("Calculator expressions available:",e.getExpressions().length)},async move(e){console.log("Bot moving:",e,"at angle:",this.angle);const t=await(await fetch(`/pointcalc?angle=${this.angle}&distance=${e}`)).json();if(this.pos.x+=t.x_pos,this.pos.y+=t.y_pos,console.log("New bot position:",this.pos),S){const n=Z(S,"X_Position"),a=Z(S,"Y_Position");n&&a&&(n.latex=`N=${this.pos.x}`,a.latex=`M=${this.pos.y}`,S.setExpression(n),S.setExpression(a))}},rotate(e){if(this.angle+=e,this.angle>=360&&(this.angle-=360),this.angle<0&&(this.angle+=360),console.log("Bot rotated to angle:",this.angle),S){const i=Z(S,"Angle");i&&(i.latex=`R=${this.angle}`,S.setExpression(i))}}};let Qe=0;function Ze(e){if(console.log("Attempting to plot point:",e),!S){console.error("No calculator instance available for plotting");return}const i={id:`plotted_point${Qe++}`,type:"expression",latex:`(${e.x}, ${e.y})`,pointStyle:"POINT",color:"#2563eb",pointSize:"12"};console.log("Plotting point expression:",i),S.setExpression(i),console.log("Point plotted successfully")}function ei(e){return e*(Math.PI/180)}function q(e,i=2){if(typeof e=="number")return Number(e.toFixed(i));if(Array.isArray(e))return e.map(t=>q(t,i));if(typeof e=="object"&&e!==null){const t={};for(const n in e)t[n]=q(e[n],i);return t}return e}function ii(e){if(!L.sensors[e])return console.error(`Sensor ${e} not found`),null;const i=L.sensors[e],t=ei(L.angle||0),n=i.x*Math.cos(t)+i.y*Math.sin(t),a=-i.x*Math.sin(t)+i.y*Math.cos(t);let o=(i.angle+L.angle)%360;o<0&&(o+=360);const c={x:L.pos.x+n,y:L.pos.y+a,angle:o};return q(c,2)}async function ti(e,i){const t=ii(i);if(!t)return{x:NaN,y:NaN};const a=await(await fetch(`/pointcalc?angle=${t.angle}&distance=${e}`)).json();if(!a||isNaN(a.x_pos)||isNaN(a.y_pos))return{x:NaN,y:NaN};const o={x:t.x+a.x_pos,y:t.y+a.y_pos};return q(o,2)}async function ni(e){console.log("Adding points from sensor data:",e.payload);for(const i of Object.keys(L.sensors)){const t=e.payload[i];if(t==null||t===1/0)continue;console.log(`Processing sensor ${i} with distance ${t}`);const n=await ti(t,i);!isNaN(n.x)&&!isNaN(n.y)&&(console.log(`Plotting point for ${i}:`,n),Ze(n))}}function ai(){const e=V(),i=V();return Te("ws://localhost:8000/ws/readings",{onMessage:t=>{console.log("=== WebSocket Message Received ==="),console.log("Data type:",t.type),console.log("Data subtype:",t.subtype),console.log("Full data:",t),t.type==="sensor_readings"?(console.log("Processing sensor readings"),ni(t)):t.type==="bot"?(console.log("Processing bot command:",t.subtype),t.subtype==="move"?(console.log("Bot move command:",t.payload.distance),L.move(t.payload.distance)):t.subtype==="rotate"&&(console.log("Bot rotate command:",t.payload.degrees),L.rotate(t.payload.degrees))):console.log("Unknown message type:",t.type),console.log("=== End WebSocket Message ===")}}),j(()=>{console.log("MapContainer useEffect triggered"),console.log("Container ref:",e.current?"AVAILABLE":"NULL"),console.log("Calculator ref:",i.current?"EXISTS":"NULL"),e.current&&!i.current&&(console.log("Initializing Desmos and setting up bot"),i.current=Ke(e.current),L.setCalculator(i.current),console.log("Setup complete"));const t=()=>{console.log("Window resize triggered"),i.current&&e.current&&(console.log("Resizing calculator"),i.current.resize())};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),h("main",{className:"flex-1 flex flex-col items-center justify-center p-4 h-full min-w-0",children:h("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg w-full h-full flex flex-col items-center justify-center",children:[h("h2",{className:"text-xl font-semibold text-white mb-4",children:"Minimap"}),h("div",{ref:e,className:"bg-gray-600 relative w-full h-full min-h-[400px] min-w-[400px]"})]})})}function oi(){const[e,i]=te([]);return Te("ws://localhost:8000/ws",{onMessage:t=>{t.type==="log"&&i(n=>[...n,t])}}),h("div",{className:"min-h-screen bg-gray-50 text-gray-800 bg-gray-600",children:[h(Ye,{}),h("div",{className:"flex flex-row w-full min-h-[calc(100vh-64px)] h-[calc(100vh-64px)]",children:[h(Je,{logs:e}),h(ai,{})]})]})}Be(h(oi,{}),document.getElementById("app"));
