var H,h,We,W,ye,$e,ze,Me,pe,ae,oe,Ie,U={},Ce=[],Xe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,B=Array.isArray;function w(e,t){for(var n in t)e[n]=t[n];return e}function me(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ee(e,t,n){var i,o,a,l={};for(a in t)a=="key"?i=t[a]:a=="ref"?o=t[a]:l[a]=t[a];if(arguments.length>2&&(l.children=arguments.length>3?H.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)l[a]===void 0&&(l[a]=e.defaultProps[a]);return A(e,l,i,o,null)}function A(e,t,n,i,o){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++We,__i:-1,__u:0};return o==null&&h.vnode!=null&&h.vnode(a),a}function F(e){return e.children}function T(e,t){this.props=e,this.context=t}function z(e,t){if(t==null)return e.__?z(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?z(e):null}function Ae(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Ae(e)}}function re(e){(!e.__d&&(e.__d=!0)&&W.push(e)&&!X.__r++||ye!=h.debounceRendering)&&((ye=h.debounceRendering)||$e)(X)}function X(){for(var e,t,n,i,o,a,l,s=1;W.length;)W.length>s&&W.sort(ze),e=W.shift(),s=W.length,e.__d&&(n=void 0,o=(i=(t=e).__v).__e,a=[],l=[],t.__P&&((n=w({},i)).__v=i.__v+1,h.vnode&&h.vnode(n),_e(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[o]:null,a,o??z(i),!!(32&i.__u),l),n.__v=i.__v,n.__.__k[n.__i]=n,Re(a,n,l),n.__e!=o&&Ae(n)));X.__r=0}function Te(e,t,n,i,o,a,l,s,p,c,_){var r,f,m,d,v,x,y=i&&i.__k||Ce,g=t.length;for(p=Je(n,t,y,p,g),r=0;r<g;r++)(m=n.__k[r])!=null&&(f=m.__i==-1?U:y[m.__i]||U,m.__i=r,x=_e(e,m,f,o,a,l,s,p,c,_),d=m.__e,m.ref&&f.ref!=m.ref&&(f.ref&&fe(f.ref,null,m),_.push(m.ref,m.__c||d,m)),v==null&&d!=null&&(v=d),4&m.__u||f.__k===m.__k?p=Ue(m,p,e):typeof m.type=="function"&&x!==void 0?p=x:d&&(p=d.nextSibling),m.__u&=-7);return n.__e=v,p}function Je(e,t,n,i,o){var a,l,s,p,c,_=n.length,r=_,f=0;for(e.__k=new Array(o),a=0;a<o;a++)(l=t[a])!=null&&typeof l!="boolean"&&typeof l!="function"?(p=a+f,(l=e.__k[a]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?A(null,l,null,null,null):B(l)?A(F,{children:l},null,null,null):l.constructor==null&&l.__b>0?A(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=e,l.__b=e.__b+1,s=null,(c=l.__i=Ye(l,n,p,r))!=-1&&(r--,(s=n[c])&&(s.__u|=2)),s==null||s.__v==null?(c==-1&&(o>_?f--:o<_&&f++),typeof l.type!="function"&&(l.__u|=4)):c!=p&&(c==p-1?f--:c==p+1?f++:(c>p?f--:f++,l.__u|=4))):e.__k[a]=null;if(r)for(a=0;a<_;a++)(s=n[a])!=null&&(2&s.__u)==0&&(s.__e==i&&(i=z(s)),Be(s,s));return i}function Ue(e,t,n){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,t=Ue(i[o],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=z(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function le(e,t){return t=t||[],e==null||typeof e=="boolean"||(B(e)?e.some(function(n){le(n,t)}):t.push(e)),t}function Ye(e,t,n,i){var o,a,l=e.key,s=e.type,p=t[n];if(p===null&&e.key==null||p&&l==p.key&&s==p.type&&(2&p.__u)==0)return n;if(i>(p!=null&&(2&p.__u)==0?1:0))for(o=n-1,a=n+1;o>=0||a<t.length;){if(o>=0){if((p=t[o])&&(2&p.__u)==0&&l==p.key&&s==p.type)return o;o--}if(a<t.length){if((p=t[a])&&(2&p.__u)==0&&l==p.key&&s==p.type)return a;a++}}return-1}function ge(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Xe.test(t)?n:n+"px"}function G(e,t,n,i,o){var a,l;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||ge(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||ge(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(Me,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?i?n.u=i.u:(n.u=pe,e.addEventListener(t,a?oe:ae,a)):e.removeEventListener(t,a?oe:ae,a);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function xe(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=pe++;else if(t.t<n.u)return;return n(h.event?h.event(t):t)}}}function _e(e,t,n,i,o,a,l,s,p,c){var _,r,f,m,d,v,x,y,g,M,P,j,I,he,V,C,ee,N=t.type;if(t.constructor!=null)return null;128&n.__u&&(p=!!(32&n.__u),a=[s=t.__e=n.__e]),(_=h.__b)&&_(t);e:if(typeof N=="function")try{if(y=t.props,g="prototype"in N&&N.prototype.render,M=(_=N.contextType)&&i[_.__c],P=_?M?M.props.value:_.__:i,n.__c?x=(r=t.__c=n.__c).__=r.__E:(g?t.__c=r=new N(y,P):(t.__c=r=new T(y,P),r.constructor=N,r.render=Ze),M&&M.sub(r),r.props=y,r.state||(r.state={}),r.context=P,r.__n=i,f=r.__d=!0,r.__h=[],r._sb=[]),g&&r.__s==null&&(r.__s=r.state),g&&N.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=w({},r.__s)),w(r.__s,N.getDerivedStateFromProps(y,r.__s))),m=r.props,d=r.state,r.__v=t,f)g&&N.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),g&&r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(g&&N.getDerivedStateFromProps==null&&y!==m&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(y,P),!r.__e&&r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(y,r.__s,P)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(r.props=y,r.state=r.__s,r.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(E){E&&(E.__=t)}),j=0;j<r._sb.length;j++)r.__h.push(r._sb[j]);r._sb=[],r.__h.length&&l.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(y,r.__s,P),g&&r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(m,d,v)})}if(r.context=P,r.props=y,r.__P=e,r.__e=!1,I=h.__r,he=0,g){for(r.state=r.__s,r.__d=!1,I&&I(t),_=r.render(r.props,r.state,r.context),V=0;V<r._sb.length;V++)r.__h.push(r._sb[V]);r._sb=[]}else do r.__d=!1,I&&I(t),_=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++he<25);r.state=r.__s,r.getChildContext!=null&&(i=w(w({},i),r.getChildContext())),g&&!f&&r.getSnapshotBeforeUpdate!=null&&(v=r.getSnapshotBeforeUpdate(m,d)),C=_,_!=null&&_.type===F&&_.key==null&&(C=He(_.props.children)),s=Te(e,B(C)?C:[C],t,n,i,o,a,l,s,p,c),r.base=t.__e,t.__u&=-161,r.__h.length&&l.push(r),x&&(r.__E=r.__=null)}catch(E){if(t.__v=null,p||a!=null)if(E.then){for(t.__u|=p?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,t.__e=s}else for(ee=a.length;ee--;)me(a[ee]);else t.__e=n.__e,t.__k=n.__k;h.__e(E,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=Qe(n.__e,t,n,i,o,a,l,p,c);return(_=h.diffed)&&_(t),128&t.__u?void 0:s}function Re(e,t,n){for(var i=0;i<n.length;i++)fe(n[i],n[++i],n[++i]);h.__c&&h.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(a){a.call(o)})}catch(a){h.__e(a,o.__v)}})}function He(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:B(e)?e.map(He):w({},e)}function Qe(e,t,n,i,o,a,l,s,p){var c,_,r,f,m,d,v,x=n.props,y=t.props,g=t.type;if(g=="svg"?o="http://www.w3.org/2000/svg":g=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),a!=null){for(c=0;c<a.length;c++)if((m=a[c])&&"setAttribute"in m==!!g&&(g?m.localName==g:m.nodeType==3)){e=m,a[c]=null;break}}if(e==null){if(g==null)return document.createTextNode(y);e=document.createElementNS(o,g,y.is&&y),s&&(h.__m&&h.__m(t,a),s=!1),a=null}if(g==null)x===y||s&&e.data==y||(e.data=y);else{if(a=a&&H.call(e.childNodes),x=n.props||U,!s&&a!=null)for(x={},c=0;c<e.attributes.length;c++)x[(m=e.attributes[c]).name]=m.value;for(c in x)if(m=x[c],c!="children"){if(c=="dangerouslySetInnerHTML")r=m;else if(!(c in y)){if(c=="value"&&"defaultValue"in y||c=="checked"&&"defaultChecked"in y)continue;G(e,c,null,m,o)}}for(c in y)m=y[c],c=="children"?f=m:c=="dangerouslySetInnerHTML"?_=m:c=="value"?d=m:c=="checked"?v=m:s&&typeof m!="function"||x[c]===m||G(e,c,m,x[c],o);if(_)s||r&&(_.__html==r.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(r&&(e.innerHTML=""),Te(t.type=="template"?e.content:e,B(f)?f:[f],t,n,i,g=="foreignObject"?"http://www.w3.org/1999/xhtml":o,a,l,a?a[0]:n.__k&&z(n,0),s,p),a!=null)for(c=a.length;c--;)me(a[c]);s||(c="value",g=="progress"&&d==null?e.removeAttribute("value"):d!=null&&(d!==e[c]||g=="progress"&&!d||g=="option"&&d!=x[c])&&G(e,c,d,x[c],o),c="checked",v!=null&&v!=e[c]&&G(e,c,v,x[c],o))}return e}function fe(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(o){h.__e(o,n)}}function Be(e,t,n){var i,o;if(h.unmount&&h.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||fe(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){h.__e(a,t)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&Be(i[o],t,n||typeof e.type!="function");n||me(e.__e),e.__c=e.__=e.__e=void 0}function Ze(e,t,n){return this.constructor(e,n)}function et(e,t,n){var i,o,a,l;t==document&&(t=document.documentElement),h.__&&h.__(e,t),o=(i=!1)?null:t.__k,a=[],l=[],_e(t,e=t.__k=Ee(F,null,[e]),o||U,U,t.namespaceURI,o?null:t.firstChild?H.call(t.childNodes):null,a,o?o.__e:t.firstChild,i,l),Re(a,e,l)}function tt(e,t,n){var i,o,a,l,s=w({},e.props);for(a in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)a=="key"?i=t[a]:a=="ref"?o=t[a]:s[a]=t[a]===void 0&&l!=null?l[a]:t[a];return arguments.length>2&&(s.children=arguments.length>3?H.call(arguments,2):n),A(e.type,s,i||e.key,o||e.ref,null)}function nt(e){function t(n){var i,o;return this.getChildContext||(i=new Set,(o={})[t.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&i.forEach(function(l){l.__e=!0,re(l)})},this.sub=function(a){i.add(a);var l=a.componentWillUnmount;a.componentWillUnmount=function(){i&&i.delete(a),l&&l.call(a)}}),n.children}return t.__c="__cC"+Ie++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,i){return n.children(i)}).contextType=t,t}H=Ce.slice,h={__e:function(e,t,n,i){for(var o,a,l;t=t.__;)if((o=t.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(e)),l=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),l=o.__d),l)return o.__E=o}catch(s){e=s}throw e}},We=0,T.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=w({},this.state),typeof e=="function"&&(e=e(w({},n),this.props)),e&&w(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),re(this))},T.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),re(this))},T.prototype.render=F,W=[],$e=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ze=function(e,t){return e.__v.__b-t.__v.__b},X.__r=0,Me=/(PointerCapture)$|Capture$/i,pe=0,ae=xe(!1),oe=xe(!0),Ie=0;var it=0;function u(e,t,n,i,o,a){t||(t={});var l,s,p=t;if("ref"in p)for(s in p={},t)s=="ref"?l=t[s]:p[s]=t[s];var c={type:e,props:p,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--it,__i:-1,__u:0,__source:o,__self:a};if(typeof e=="function"&&(l=e.defaultProps))for(s in l)p[s]===void 0&&(p[s]=l[s]);return h.vnode&&h.vnode(c),c}var R,b,te,be,J=0,Fe=[],D=h,De=D.__b,ve=D.__r,Se=D.diffed,Oe=D.__c,Le=D.unmount,Ne=D.__;function ue(e,t){D.__h&&D.__h(b,e,J||t),J=0;var n=b.__H||(b.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function k(e){return J=1,at(Ve,e)}function at(e,t,n){var i=ue(R++,2);if(i.t=e,!i.__c&&(i.__=[Ve(void 0,t),function(s){var p=i.__N?i.__N[0]:i.__[0],c=i.t(p,s);p!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=b,!b.__f)){var o=function(s,p,c){if(!i.__c.__H)return!0;var _=i.__c.__H.__.filter(function(f){return!!f.__c});if(_.every(function(f){return!f.__N}))return!a||a.call(this,s,p,c);var r=i.__c.props!==s;return _.forEach(function(f){if(f.__N){var m=f.__[0];f.__=f.__N,f.__N=void 0,m!==f.__[0]&&(r=!0)}}),a&&a.call(this,s,p,c)||r};b.__f=!0;var a=b.shouldComponentUpdate,l=b.componentWillUpdate;b.componentWillUpdate=function(s,p,c){if(this.__e){var _=a;a=void 0,o(s,p,c),a=_}l&&l.call(this,s,p,c)},b.shouldComponentUpdate=o}return i.__N||i.__}function Y(e,t){var n=ue(R++,3);!D.__s&&je(n.__H,t)&&(n.__=e,n.u=t,b.__H.__h.push(n))}function Q(e){return J=5,ot(function(){return{current:e}},[])}function ot(e,t){var n=ue(R++,7);return je(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function rt(){for(var e;e=Fe.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(q),e.__H.__h.forEach(se),e.__H.__h=[]}catch(t){e.__H.__h=[],D.__e(t,e.__v)}}D.__b=function(e){b=null,De&&De(e)},D.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ne&&Ne(e,t)},D.__r=function(e){ve&&ve(e),R=0;var t=(b=e.__c).__H;t&&(te===b?(t.__h=[],b.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(q),t.__h.forEach(se),t.__h=[],R=0)),te=b},D.diffed=function(e){Se&&Se(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Fe.push(t)!==1&&be===D.requestAnimationFrame||((be=D.requestAnimationFrame)||lt)(rt)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),te=b=null},D.__c=function(e,t){t.some(function(n){try{n.__h.forEach(q),n.__h=n.__h.filter(function(i){return!i.__||se(i)})}catch(i){t.some(function(o){o.__h&&(o.__h=[])}),t=[],D.__e(i,n.__v)}}),Oe&&Oe(e,t)},D.unmount=function(e){Le&&Le(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{q(i)}catch(o){t=o}}),n.__H=void 0,t&&D.__e(t,n.__v))};var we=typeof requestAnimationFrame=="function";function lt(e){var t,n=function(){clearTimeout(i),we&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);we&&(t=requestAnimationFrame(n))}function q(e){var t=b,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),b=t}function se(e){var t=b;e.__c=e.__(),b=t}function je(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function Ve(e,t){return typeof t=="function"?t(e):t}var st={};function K(e,t){for(var n in t)e[n]=t[n];return e}function ct(e,t,n){var i,o=/(?:\?([^#]*))?(#.*)?$/,a=e.match(o),l={};if(a&&a[1])for(var s=a[1].split("&"),p=0;p<s.length;p++){var c=s[p].split("=");l[decodeURIComponent(c[0])]=decodeURIComponent(c.slice(1).join("="))}e=ce(e.replace(o,"")),t=ce(t||"");for(var _=Math.max(e.length,t.length),r=0;r<_;r++)if(t[r]&&t[r].charAt(0)===":"){var f=t[r].replace(/(^:|[+*?]+$)/g,""),m=(t[r].match(/[+*?]+$/)||st)[0]||"",d=~m.indexOf("+"),v=~m.indexOf("*"),x=e[r]||"";if(!x&&!v&&(m.indexOf("?")<0||d)){i=!1;break}if(l[f]=decodeURIComponent(x),d||v){l[f]=e.slice(r).map(decodeURIComponent).join("/");break}}else if(t[r]!==e[r]){i=!1;break}return(n.default===!0||i!==!1)&&l}function pt(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function mt(e,t){return e.index=t,e.rank=function(n){return n.props.default?0:ce(n.props.path).map(_t).join("")}(e),e.props}function ce(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function _t(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var ft={},$=[],Pe=[],O=null,Ge={url:de()},ut=nt(Ge);function de(){var e;return""+((e=O&&O.location?O.location:O&&O.getCurrentLocation?O.getCurrentLocation():typeof location<"u"?location:ft).pathname||"")+(e.search||"")}function dt(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(n){for(var i=$.length;i--;)if($[i].canRoute(n))return!0;return!1}(e)&&function(n,i){i===void 0&&(i="push"),O&&O[i]?O[i](n):typeof history<"u"&&history[i+"State"]&&history[i+"State"](null,null,n)}(e,t?"replace":"push"),Ke(e)}function Ke(e){for(var t=!1,n=0;n<$.length;n++)$[n].routeTo(e)&&(t=!0);return t}function ht(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return dt(t)}}function yt(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function gt(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(ht(t))return yt(e)}while(t=t.parentNode)}}var ke=!1;function qe(e){e.history&&(O=e.history),this.state={url:e.url||de()}}K(qe.prototype=new T,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=le(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;ke||(ke=!0,O||addEventListener("popstate",function(){Ke(de())}),addEventListener("click",gt)),$.push(this),O&&(this.u=O.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),$.splice($.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(mt).sort(pt);for(var n=0;n<e.length;n++){var i=e[n],o=ct(t,i.props.path,i.props);if(o)return[i,o]}},render:function(e,t){var n,i,o=e.onChange,a=t.url,l=this.c,s=this.g(le(e.children),a);if(s&&(i=tt(s[0],K(K({url:a,matches:n=s[1]},n),{key:void 0,ref:void 0}))),a!==(l&&l.url)){K(Ge,l=this.c={url:a,previous:l&&l.url,current:i,path:i?i.props.path:null,matches:n}),l.router=this,l.active=i?[i]:[];for(var p=Pe.length;p--;)Pe[p]({});typeof o=="function"&&o(l)}return Ee(ut.Provider,{value:l},i)}});function xt(){const[e,t]=k(100),[n,i]=k(100),[o,a]=k("connected");return u("nav",{className:"bg-gray-950 p-4",children:u("div",{className:"flex justify-between items-center",children:[u("a",{href:"#",className:"text-white text-lg font-semibold hover:bg-gray-700 px-4 py-2 rounded-lg transition duration-300",children:"CaveBot UI"}),u("div",{className:"flex items-center space-x-6",children:[u("div",{className:"text-gray-300",children:[u("span",{className:`mr-4 px-3 py-1 rounded-full text-sm ${e>50?"bg-green-700":e>20?"bg-yellow-600":"bg-red-600"}`,children:["Pico Battery: ",e,"%"]}),u("span",{className:`mr-4 px-3 py-1 rounded-full text-sm ${n>50?"bg-green-700":n>20?"bg-yellow-600":"bg-red-600"}`,children:["SPKPRM Battery: ",n,"%"]}),u("span",{className:`mr-4 px-3 py-1 rounded-full text-sm ${o==="connected"?"bg-green-700":"bg-red-600"}`,children:["Status: ",o]})]}),u("div",{className:"flex space-x-4",children:[u("button",{className:"bg-gray-900 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition duration-300",children:"map"}),u("button",{className:"bg-gray-900 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition duration-300",children:"CLI"}),u("button",{className:"bg-gray-900 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition duration-300",children:"Settings"})]})]})]})})}function bt({logs:e}){const[t,n]=k(288),[i,o]=k(!1),[a,l]=k(!1),[s,p]=k(288),c=Q();Y(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[e]);const _=d=>{o(!0),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},r=d=>{if(!i)return;const v=Math.max(192,Math.min(d.clientX,512));n(v)},f=()=>{o(!1),document.body.style.cursor="",document.body.style.userSelect=""},m=()=>{a?n(s):(p(t),n(50)),l(!a)};return Y(()=>{if(i)return document.addEventListener("mousemove",r),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",f)}},[i]),u("div",{className:"bg-gray-600 relative flex-shrink-0",style:{width:`${a?50:t}px`,transition:i?"none":"width 0.3s ease-in-out"},children:[u("aside",{className:"h-full bg-gray-800 p-6 shadow-lg space-y-6 flex flex-col justify-stretch w-full",children:[u("button",{onClick:m,className:"absolute top-1/2 -translate-y-1/2 right-0 transform translate-x-full bg-gray-700 hover:bg-gray-600 text-white p-2 rounded-r-md shadow-lg z-20",style:{display:"block"},children:a?">":"<"}),!a&&u(F,{children:u("section",{className:"bg-gray-900 p-4 rounded-lg shadow-sm flex-1 flex flex-col",children:[u("h2",{className:"text-lg font-semibold text-gray-100 mb-3",children:"Logs"}),u("div",{ref:c,className:"text-sm text-gray-300 max-h-48 overflow-y-auto border border-gray-700 p-2 rounded bg-gray-800",children:e.map((d,v)=>u("div",{className:"log-entry",children:[d.timestamp," - type: ",d.subtype,", message: ",d.payload.message]},v))})]})})]}),!a&&u("div",{className:"absolute top-0 right-0 h-full w-2 cursor-col-resize bg-black opacity-50 hover:opacity-80 z-10",onMouseDown:_})]})}const ne=[{id:"25",type:"expression",latex:"t=(\\pi/180)*-R",color:"#388c46",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"27",type:"expression",latex:"W=10",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"26",type:"expression",latex:"L=10",color:"#6042a6",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"Angle",type:"expression",latex:"R=0",color:"#2d70b3",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},sliderBounds:{min:"0",max:"360",step:"15"},playing:!1},{id:"X_Position",type:"expression",latex:"N=-0",color:"#6042a6",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"Y_Position",type:"expression",latex:"M=0",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"9",type:"expression",latex:"A=(N+(-W)*\\cos(t)-(-L)*\\sin(t),M+(-W)*\\sin(t)+(-L)*\\cos(t))",color:"#388c46",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"10",type:"expression",latex:"B=(N+W*\\cos(t)-(-L)*\\sin(t),M+W*\\sin(t)+(-L)*\\cos(t))",color:"#6042a6",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"11",type:"expression",latex:"C=(N+W*\\cos(t)-L*\\sin(t),M+W*\\sin(t)+L*\\cos(t))",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"12",type:"expression",latex:"D=(N+(-W)*\\cos(t)-L*\\sin(t),M+(-W)*\\sin(t)+L*\\cos(t))",color:"#c74440",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"botShape",type:"expression",latex:"\\operatorname{polygon}(A,B,C,D)",color:"#2d70b3",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"0.75",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"19",type:"expression",latex:"E=(N+0*\\cos(t)-(1.25*L)*\\sin(t),M+0*\\sin(t)+(1.25*L)*\\cos(t))",color:"#2d70b3",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"20",type:"expression",latex:"F=(N+(-0.25*W)*\\cos(t)-L*\\sin(t),M+(-0.25*W)*\\sin(t)+L*\\cos(t))",color:"#388c46",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"21",type:"expression",latex:"G=(N+0.25*W*\\cos(t)-L*\\sin(t),M+0.25*W*\\sin(t)+L*\\cos(t))",color:"#6042a6",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"",hidden:!0,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"23",type:"expression",latex:"\\operatorname{polygon}\\left(E,F,G\\right)",color:"#c74440",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointStyle:"POINT",pointSize:"",movablePointSize:"",pointOpacity:"",fillOpacity:"0.75",hidden:!1,secret:!1,dragMode:"AUTO",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"91",type:"expression",latex:"s_{1}=\\left(N+W*-0.5*\\cos(t)-L*1*\\sin(t),\\ M+W*-0.5*\\sin(t)+L*1*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"93",type:"expression",latex:"s_{2}=\\left(N+W*+0.5*\\cos(t)-L*1*\\sin(t),\\ M+W*+0.5*\\sin(t)+L*1*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"94",type:"expression",latex:"s_{3}\\ =\\left(N+W*-0.5*\\cos(t)-L*-1*\\sin(t),\\ M+W*-0.5*\\sin(t)+L*-1*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"95",type:"expression",latex:"s_{4}=\\left(N+W*+0.5*\\cos(t)-L*-1*\\sin(t),\\ M+W*+0.5*\\sin(t)+L*-1*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"96",type:"expression",latex:"s_{5}=\\left(N+W*-1*\\cos(t)-L*-0.5*\\sin(t),\\ M+W*-1*\\sin(t)+L*-0.5*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"97",type:"expression",latex:"s_{6}=\\left(N+W*-1*\\cos(t)-L*+0.5*\\sin(t),\\ M+W*-1*\\sin(t)+L*+0.5*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"98",type:"expression",latex:"s_{7}=\\left(N+W*+1*\\cos(t)-L*+0.5*\\sin(t),\\ M+W*+1*\\sin(t)+L*+0.5*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1},{id:"99",type:"expression",latex:"s_{8}=\\left(N+W*+1*\\cos(t)-L*-0.5*\\sin(t),\\ M+W*+1*\\sin(t)+L*-0.5*\\cos(t)\\right)",color:"#000000",lineStyle:"SOLID",lineWidth:"",lineOpacity:"",pointSize:"12",movablePointSize:"16",pointOpacity:"",fillOpacity:"",hidden:!1,secret:!1,dragMode:"NONE",label:"",showLabel:!1,labelSize:"",labelOrientation:"default",interactiveLabel:!1,readonly:!1,parametricDomain:{min:"",max:""},parametricDomain3Du:{min:"",max:""},parametricDomain3Dv:{min:"",max:""},parametricDomain3Dr:{min:"",max:""},parametricDomain3Dphi:{min:"",max:""},polarDomain:{min:"",max:""},playing:!1}];function Dt(e){console.log("Initializing Desmos calculator");const t=window.Desmos.GraphingCalculator(e,{keypad:!1,expressions:!1,settingsMenu:!1});return console.log("Adding expressions to calculator:",ne.length),ne.forEach((n,i)=>{console.log(`Adding expression ${i+1}/${ne.length}: ${n.id}`),t.setExpression(n)}),console.log("Desmos calculator initialized"),t}function ie(e,t){const n=e.getExpressions(),i=n.find(o=>o.id===t);return console.log(`Looking for expression '${t}':`,i?"FOUND":"NOT FOUND"),i||console.log("Available expressions:",n.map(o=>o.id)),i}let L=null;const S={pos:{x:0,y:0},angle:0,sensors:{leftfront:{x:-10,y:5,angle:270},leftback:{x:-10,y:-5,angle:270},rightfront:{x:10,y:5,angle:90},rightback:{x:10,y:-5,angle:90},frontleft:{x:-5,y:10,angle:0},frontright:{x:5,y:10,angle:0},backleft:{x:-5,y:-10,angle:180},backright:{x:5,y:-10,angle:180}},setCalculator(e){console.log("Setting calculator instance:",e?"SUCCESS":"NULL"),L=e,e&&console.log("Calculator expressions available:",e.getExpressions().length)},async move(e){console.log("Bot moving:",e,"at angle:",this.angle);const n=await(await fetch(`/pointcalc?angle=${this.angle}&distance=${e}`)).json();if(this.pos.x+=n.x_pos,this.pos.y+=n.y_pos,console.log("New bot position:",this.pos),L){const i=ie(L,"X_Position"),o=ie(L,"Y_Position");i&&o&&(i.latex=`N=${this.pos.x}`,o.latex=`M=${this.pos.y}`,L.setExpression(i),L.setExpression(o))}},rotate(e){if(this.angle+=e,this.angle>=360&&(this.angle-=360),this.angle<0&&(this.angle+=360),console.log("Bot rotated to angle:",this.angle),L){const t=ie(L,"Angle");t&&(t.latex=`R=${this.angle}`,L.setExpression(t))}}};let vt=0;function St(e){if(console.log("Attempting to plot point:",e),!L){console.error("No calculator instance available for plotting");return}const t={id:`plotted_point${vt++}`,type:"expression",latex:`(${e.x}, ${e.y})`,color:"#388c46",pointSize:"12"};console.log("Plotting point expression:",t),L.setExpression(t),console.log("Point plotted successfully")}function Ot(){const e=Q(),t=Q();return Y(()=>{console.log("MapContainer useEffect triggered"),console.log("Container ref:",e.current?"AVAILABLE":"NULL"),console.log("Calculator ref:",t.current?"EXISTS":"NULL"),e.current&&!t.current&&(console.log("Initializing Desmos and setting up bot"),t.current=Dt(e.current),S.setCalculator(t.current),console.log("Setup complete"));const n=()=>{console.log("Window resize triggered"),t.current&&e.current&&(console.log("Resizing calculator"),t.current.resize())};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),u("main",{className:"bg-gray-600 flex-1 flex flex-col items-center justify-center h-full min-w-0",children:u("div",{className:"bg-gray-800 p-6 shadow-lg w-full h-full flex flex-col items-center justify-center",children:[u("h2",{className:"text-xl font-semibold text-white mb-4",children:"Minimap"}),u("div",{ref:e,className:"bg-gray-600 relative w-full h-full min-h-[400px] min-w-[400px]"})]})})}function Lt({logs:e}){return u("div",{className:"bg-gray-600 flex flex-row w-full min-h-[calc(100vh-64px)] h-[calc(100vh-64px)]",children:[u(bt,{logs:e}),u(Ot,{})]})}function Nt(e,t={}){const n=Q(),{onMessage:i,onOpen:o,onClose:a}=t;return Y(()=>{console.log(`Attempting WebSocket connection to: ${e}`);const s=new WebSocket(e);return n.current=s,s.onopen=()=>{console.log(`✅ WebSocket connected successfully: ${e}`),o?.()},s.onmessage=p=>{console.log("Raw WebSocket message received:",p.data);try{const c=p.data.replace(/:Infinity/g,":null");console.log("Processed WebSocket data:",c);const _=JSON.parse(c);console.log("Parsed WebSocket data:",_),i?.(_)}catch(c){console.error("❌ WebSocket message parse error:",c),console.error("Raw data that failed:",p.data)}},s.onerror=p=>{console.error("❌ WebSocket error:",p)},s.onclose=p=>{console.log(`❌ WebSocket closed: ${e}`,p.code,p.reason),a?.()},()=>{console.log(`Closing WebSocket connection: ${e}`),s.close()}},[e]),{sendMessage:s=>{console.log("Attempting to send WebSocket message:",s),n.current?.readyState===WebSocket.OPEN?(console.log("✅ Sending WebSocket message"),n.current.send(JSON.stringify(s))):console.error("❌ WebSocket not ready for sending. State:",n.current?.readyState)}}}async function wt(e,t){try{const n=await fetch(`/pointcalc?angle=${encodeURIComponent(e)}&distance=${encodeURIComponent(t)}`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Error fetching pointcalc:",n),null}}function Pt(e){return e*(Math.PI/180)}function Z(e,t=2){if(typeof e=="number")return Number(e.toFixed(t));if(Array.isArray(e))return e.map(n=>Z(n,t));if(typeof e=="object"&&e!==null){const n={};for(const i in e)n[i]=Z(e[i],t);return n}return e}function kt(e){if(console.log(`GetSensorVector called for sensor: ${e}`),console.log("bot.sensors:",S.sensors),S.sensors[e]==null)return console.error(`Sensor ${e} not found in bot measurements.`),null;const t=S.sensors[e];console.log("sensorData:",t),console.log("bot.angle:",S.angle),console.log("bot.pos:",S.pos);const n=Pt(S.angle||0),i=t.x*Math.cos(n)+t.y*Math.sin(n),o=-t.x*Math.sin(n)+t.y*Math.cos(n);let a=(t.angle+S.angle)%360;a<0&&(a+=360);const l={x:S.pos.x+i,y:S.pos.y+o,angle:a};return console.log("Calculated sensorVec:",l),Z(l,2)}async function Wt(e,t){const n=kt(t);if(!n||typeof n.angle!="number"||typeof n.x!="number"||typeof n.y!="number")return console.error("CalcPoint: Invalid sensorVector for",t,n),{x:NaN,y:NaN};const i=await wt(n.angle,e);if(!i||typeof i.x_pos!="number"||typeof i.y_pos!="number"||isNaN(i.x_pos)||isNaN(i.y_pos))return console.error("CalcPoint: Invalid offsets from vecmath.getPointCalc:",i),{x:NaN,y:NaN};const o={x:n.x+i.x_pos,y:n.y+i.y_pos};return Z(o,2)}async function $t(e){console.log("=== ADDPOINTS DEBUG ==="),console.log("distanceReads:",e),console.log("bot object:",S),console.log("bot.sensors:",S.sensors),console.log("bot.pos:",S.pos),console.log("bot.angle:",S.angle);for(let t=0;t<Object.keys(S.sensors).length;t++){let n=Object.keys(S.sensors)[t],i=e.payload[n];if(console.log(`Sensor ${n}: distance=${i}`),i==null||i===1/0){console.log(`Skipping sensor ${n} - invalid distance`);continue}else{console.log(`Processing sensor ${n} with distance ${i}`);let o=await Wt(i,n);console.log(`Calculated point for ${n}:`,o),o.x!==NaN&&o.y!==NaN?(console.log(`Plotting point for ${n}:`,o),St(o)):console.error(`Invalid point for sensor ${n}:`,o)}}console.log("=== END ADDPOINTS DEBUG ===")}function zt(){const[e,t]=k([]);return Nt("ws://localhost:8000/ws",{onMessage:n=>{console.log("=== App WebSocket Message Received ==="),console.log("Full data:",n),n.type==="log"?t(i=>[...i,n]):n.type==="sensor_readings"?(console.log("Processing sensor readings in App"),$t(n)):n.type==="bot"&&(console.log("Processing bot command in App:",n.subtype),n.subtype==="move"?(console.log("Bot move command:",n.payload.distance),S.move(n.payload.distance)):n.subtype==="rotate"&&(console.log("Bot rotate command:",n.payload.degrees),S.rotate(n.payload.degrees))),console.log("=== End App WebSocket Message ===")}}),u("div",{className:"min-h-screen text-gray-800 bg-gray-600",children:[u(xt,{}),u(qe,{children:u(Lt,{logs:e,path:"/"})})]})}et(u(zt,{}),document.getElementById("app"));
